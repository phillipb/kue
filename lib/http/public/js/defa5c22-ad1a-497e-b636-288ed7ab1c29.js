/*! Kue - vdefa5c22-ad1a-497e-b636-288ed7ab1c29 - 2014-06-21 */
App=Ember.Application.create({rootElement:"#body",LOG_TRANSITIONS:true,LOG_TRANSITIONS_INTERNAL:true});Ember.Application.initializer({name:"Dependency-Injection",initialize:function(container,application){App.register("session:current",App.Session,{singleton:true});App.inject("controller","session","session:current");App.inject("route","session","session:current")}});App.Session=Ember.Object.extend({currentUser:"",isAuthenticated:function(){return!!localStorage.getItem("token")}.property("isAuthenticated"),token:function(){return localStorage.getItem("token")}.property("token"),setToken:function(token){localStorage.setItem("token",token);this.isAuthenticated=true},removeToken:function(){localStorage.removeItem("token");this.isAuthenticated=false}});App.ApplicationController=Ember.ObjectController.extend({});App.HomeController=Ember.ObjectController.extend({actions:{removeFirstItem:function(){this.objectAtContent(0).destroyRecord()}},total:function(argument){return this.get("length")}.property("@each")});App.JobController=Ember.ObjectController.extend({_hideCode:true,_hideError:true,actions:{toggleCode:function(){this.set("_hideCode",!this._hideCode)},toggleError:function(argument){this.set("_hideError",!this._hideError)},retry:function(){$.ajax({url:"/job/"+this.get("id")+"/state/delayed",type:"PUT",success:function(response){console.log(response)}})},retryType:function(){$.ajax({url:"/job/retry/"+this.get("type"),type:"GET",success:function(response){console.log(response)}})},remove:function(){$.ajax({url:"/job/"+this.get("id"),type:"DELETE",success:function(response){console.log(response)}})}},failed:function(){return this.get("state")=="failed"}.property("state"),hideCode:function(){return this.get("_hideCode")}.property("_hideCode"),hideError:function(){return this.get("_hideError")}.property("_hideError")});App.JobsController=Ember.ArrayController.extend({needs:["application"],application:Ember.computed.alias("controllers.application")});App.DelayedController=App.JobsController.extend();App.ActiveController=App.JobsController.extend();App.FailedController=App.JobsController.extend();App.InactiveController=App.JobsController.extend();App.CompleteController=App.JobsController.extend();DS.RESTAdapter.reopen({headers:{"x-auth-token":localStorage.getItem("token")||""}});App.RawTransform=DS.Transform.extend({deserialize:function(serialized){return serialized},serialize:function(deserialized){return deserialized}});Ember.Handlebars.helper("arrayify",function(value,options){var escaped=Handlebars.Utils.escapeExpression(value);return new Handlebars.SafeString('<span class="highlight">'+escaped+"</span>")});Ember.Handlebars.helper("codeHighlighter",function(value,options){var safeString=Ember.Handlebars.SafeString;var json=JSON.stringify(value,null,2);return new safeString(hljs.highlightAuto(json).value)});Ember.Handlebars.helper("json",function(value,options){return JSON.stringify(value)});Ember.Handlebars.helper("toAgo",function(value,options){debugger;return moment(new Date(value)).fromNow()});var attr=DS.attr;App.Job=DS.Model.extend({created_at:attr("string"),type:attr("string"),priority:attr("string"),state:attr("string"),duration:attr("string"),attempts:attr("raw"),data:attr("raw"),error:attr("string")});App.JobAdapter=DS.RESTAdapter.extend({findQuery:function(store,type,query){return this.ajax("/jobs/"+query.type+"/0..10/asc","GET")}});var attr=DS.attr;App.Stat=DS.Model.extend({completeCount:attr("number"),inactiveCount:attr("number"),activeCount:attr("number"),failedCount:attr("number"),delayedCount:attr("number")});App.StatAdapter=DS.RESTAdapter.extend({find:function(store,type,query){return this.ajax("/stats/","GET")}});setInterval(function(){$.get("/stats",function(response){App.Stat.store.update("stat",response.stats)})},1e3);(function(){"use strict";App.Router.reopen({location:"auto"});App.Router.map(function(){this.route("home",{path:"/"});this.route("inactive",{path:"/inactive"});this.route("complete",{path:"/complete"});this.route("failed",{path:"/failed"});this.route("delayed",{path:"/delayed"});this.route("active",{path:"/active"})});App.HomeRoute=Ember.Route.extend({model:function(){return{}}});App.ApplicationRoute=Ember.Route.extend({model:function(){return this.store.find("stat",1)}});App.InactiveRoute=Ember.Route.extend({model:function(){return this.store.find("job",{type:"inactive"})}});App.CompleteRoute=Ember.Route.extend({model:function(){return this.store.find("job",{type:"complete"})}});App.FailedRoute=Ember.Route.extend({model:function(){return this.store.find("job",{type:"failed"})}});App.DelayedRoute=Ember.Route.extend({model:function(){return this.store.find("job",{type:"delayed"})}});App.ActiveRoute=Ember.Route.extend({model:function(){return this.store.find("job",{type:"active"})}});App.IndexRoute=Ember.Route.extend({model:function(){return{name:"Phillip Burch"}}})})();jade=function(exports){Array.isArray||(Array.isArray=function(arr){return"[object Array]"==Object.prototype.toString.call(arr)}),Object.keys||(Object.keys=function(obj){var arr=[];for(var key in obj)obj.hasOwnProperty(key)&&arr.push(key);return arr}),exports.merge=function merge(a,b){var ac=a["class"],bc=b["class"];if(ac||bc)ac=ac||[],bc=bc||[],Array.isArray(ac)||(ac=[ac]),Array.isArray(bc)||(bc=[bc]),ac=ac.filter(nulls),bc=bc.filter(nulls),a["class"]=ac.concat(bc).join(" ");for(var key in b)key!="class"&&(a[key]=b[key]);return a};function nulls(val){return val!=null}return exports.attrs=function attrs(obj,escaped){var buf=[],terse=obj.terse;delete obj.terse;var keys=Object.keys(obj),len=keys.length;if(len){buf.push("");for(var i=0;i<len;++i){var key=keys[i],val=obj[key];"boolean"==typeof val||null==val?val&&(terse?buf.push(key):buf.push(key+'="'+key+'"')):0==key.indexOf("data")&&"string"!=typeof val?buf.push(key+"='"+JSON.stringify(val)+"'"):"class"==key&&Array.isArray(val)?buf.push(key+'="'+exports.escape(val.join(" "))+'"'):escaped&&escaped[key]?buf.push(key+'="'+exports.escape(val)+'"'):buf.push(key+'="'+val+'"')}}return buf.join(" ")},exports.escape=function escape(html){return String(html).replace(/&(?!(\w+|\#\d+);)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},exports.rethrow=function rethrow(err,filename,lineno){if(!filename)throw err;var context=3,str=require("fs").readFileSync(filename,"utf8"),lines=str.split("\n"),start=Math.max(lineno-context,0),end=Math.min(lines.length,lineno+context),context=lines.slice(start,end).map(function(line,i){var curr=i+start+1;return(curr==lineno?"  > ":"    ")+curr+"| "+line}).join("\n");throw err.path=filename,err.message=(filename||"Jade")+":"+lineno+"\n"+context+"\n\n"+err.message,err},exports}({});
//# sourceMappingURL=source-map.js